var data_str = "[[85.0, \"Marketplace\", [1]], [95.0, \"Main Building\", [1]], [102.0, \"Academy\", [1]], [108.0, \"Embassy\", [1]], [130.0, \"Cranny\", [1]], [200.0, \"Makeshift Wall\", [1]], [240.0, \"Main Building\", [2]], [250.0, \"Clay Pit\", [1]], [250.0, \"Cropland\", [1]], [250.0, \"Woodcutter\", [1]], [270.0, \"Granary\", [1]], [270.0, \"Iron Mine\", [1]], [360.0, \"Stable\", [1]], [360.0, \"Trapper\", [1]], [380.0, \"Cranny\", [2, 3]], [391.6666666666667, \"Palace\", [1]], [400.0, \"City Wall\", [1]], [400.0, \"Earth Wall\", [1]], [400.0, \"Palisade\", [1]], [400.0, \"Stone Wall\", [1]], [420.0, \"Warehouse\", [1]], [430.0, \"Rally Point\", [1]], [472.5, \"Workshop\", [1]], [480.0, \"Stonemason's Lodge\", [1]], [510.0, \"Main Building\", [5]], [537.5, \"Main Building\", [8]], [545.0, \"Smithy\", [1]], [570.0, \"Cranny\", [7]], [580.0, \"Makeshift Wall\", [2, 3]], [582.5, \"Marketplace\", [6]], [600.0, \"Horse Drinking Trough\", [1]], [650.0, \"Academy\", [2]], [650.0, \"Main Building\", [6]], [682.5, \"Academy\", [5]], [685.0, \"Embassy\", [2]], [703.3333333333334, \"Town Hall\", [1]], [710.0, \"Main Building\", [3, 4]], [710.0, \"Marketplace\", [4]], [727.5, \"Embassy\", [5]], [730.0, \"Barracks\", [1]], [746.6666666666666, \"Main Building\", [11]], [750.0, \"Marketplace\", [7]], [783.75, \"Marketplace\", [10]], [785.0, \"Residence\", [1]], [790.0, \"Granary\", [2, 3]], [830.0, \"Academy\", [3]], [840.0, \"Main Building\", [7]], [875.0, \"Academy\", [6]], [875.0, \"Makeshift Wall\", [7]], [877.5, \"Main Building\", [10]], [885.0, \"Embassy\", [3]], [915.0, \"Marketplace\", [5]], [920.0, \"Academy\", [9]], [925.0, \"Stable\", [2]], [927.5, \"Embassy\", [6]], [941.0, \"Main Building\", [14]], [956.6666666666666, \"Academy\", [8]], [956.6666666666666, \"Main Building\", [12]], [957.5, \"Marketplace\", [8]], [971.25, \"Embassy\", [9]], [990.0, \"Marketplace\", [2, 3]], [1013.3333333333334, \"Embassy\", [8]], [1029.0, \"Marketplace\", [12]], [1045.0, \"Trapper\", [2, 3]], [1065.0, \"Cranny\", [4, 5, 6]], [1070.0, \"Academy\", [4]], [1076.0, \"Brewery\", [1]], [1080.0, \"Great Stable\", [1]], [1082.5, \"Trade Office\", [1]], [1110.0, \"Cropland\", [2, 3]], [1110.0, \"Woodcutter\", [2, 3]], [1120.0, \"Clay Pit\", [2, 3]], [1122.5, \"Academy\", [7]], [1135.0, \"Embassy\", [4]], [1165.0, \"Earth Wall\", [2, 3]], [1165.0, \"Palisade\", [2, 3]], [1165.0, \"Stone Wall\", [2, 3]], [1170.0, \"City Wall\", [2, 3]], [1176.25, \"Academy\", [10]], [1185.0, \"Embassy\", [7]], [1190.0, \"Granary\", [7]], [1195.0, \"Cranny\", [10]], [1202.857142857143, \"Marketplace\", [14]], [1204.0, \"Academy\", [11]], [1205.0, \"Iron Mine\", [2, 3]], [1205.0, \"Main Building\", [15]], [1220.0, \"Warehouse\", [2, 3]], [1225.0, \"Main Building\", [13]], [1225.0, \"Marketplace\", [9]], [1246.25, \"Embassy\", [10]], [1250.0, \"Rally Point\", [2, 3]], [1275.0, \"Embassy\", [11]], [1280.0, \"Iron Foundry\", [1]], [1280.0, \"Sawmill\", [1]], [1285.0, \"Academy\", [12]], [1285.0, \"Main Building\", [16]], [1290.0, \"Brickyard\", [1]], [1312.857142857143, \"Treasury\", [1]], [1315.0, \"Marketplace\", [13]], [1336.6666666666667, \"Marketplace\", [11]], [1350.0, \"Great Granary\", [1]], [1360.0, \"Embassy\", [12]], [1370.0, \"Main Building\", [9]], [1395.0, \"Smithy\", [2]], [1403.3333333333333, \"Main Building\", [18]], [1405.0, \"Stonemason's Lodge\", [2, 3]], [1409.2857142857142, \"Academy\", [13]], [1409.2857142857142, \"Main Building\", [17]], [1469.090909090909, \"Academy\", [15]], [1469.5454545454545, \"Main Building\", [19]], [1471.25, \"Marketplace\", [17]], [1491.4285714285713, \"Embassy\", [13]], [1512.5, \"Makeshift Wall\", [12]], [1532.7777777777778, \"Marketplace\", [16]], [1540.0, \"Marketplace\", [15]], [1552.5, \"Waterworks\", [1]], [1555.909090909091, \"Embassy\", [15]], [1578.125, \"Academy\", [14]], [1585.0, \"Trapper\", [7]], [1591.5384615384614, \"Main Building\", [20]], [1645.0, \"Makeshift Wall\", [4, 5, 6]], [1665.0, \"Cranny\", [8, 9]], [1671.25, \"Embassy\", [14]], [1724.1666666666667, \"Academy\", [16]], [1737.6923076923076, \"Marketplace\", [18]], [1760.0, \"Earth Wall\", [7]], [1760.0, \"Palisade\", [7]], [1765.0, \"City Wall\", [7]], [1765.0, \"Stone Wall\", [7]], [1765.6666666666667, \"Academy\", [17]], [1807.8125, \"Marketplace\", [19]], [1825.4166666666667, \"Embassy\", [16]], [1845.0, \"Makeshift Wall\", [10]], [1845.0, \"Warehouse\", [7]], [1869.3333333333333, \"Embassy\", [17]], [1895.0, \"Rally Point\", [7]], [1925.0, \"Palace\", [3]], [1932.5, \"Makeshift Wall\", [13]], [1935.0, \"Stable\", [5]], [1948.157894736842, \"Marketplace\", [20]], [1972.0454545454545, \"Academy\", [19]], [1993.8235294117646, \"Academy\", [18]], [2010.0, \"Residence\", [2]], [2030.0, \"Stable\", [8]], [2040.0, \"Granary\", [12]], [2050.0, \"Command Center\", [1]], [2088.181818181818, \"Embassy\", [19]], [2100.0, \"Great Warehouse\", [1]], [2110.0, \"Stonemason's Lodge\", [7]], [2111.176470588235, \"Embassy\", [18]], [2135.0, \"Barracks\", [2, 3]], [2190.0, \"Great Barracks\", [1]], [2221.2, \"Academy\", [20]], [2225.0, \"Granary\", [4, 5, 6]], [2310.0, \"Hero's Mansion\", [1]], [2352.0, \"Embassy\", [20]], [2360.0, \"Makeshift Wall\", [11]], [2475.0, \"Stable\", [6]], [2477.5, \"Makeshift Wall\", [14]], [2490.0, \"Granary\", [10]], [2560.0, \"Grain Mill\", [1]], [2565.0, \"Makeshift Wall\", [8, 9]], [2596.25, \"Makeshift Wall\", [17]], [2610.0, \"Granary\", [13]], [2659.0, \"Makeshift Wall\", [18]], [2690.0, \"Stable\", [3, 4]], [2691.6666666666665, \"Palace\", [6]], [2705.0, \"Makeshift Wall\", [16]], [2722.5, \"Trapper\", [12]], [2770.0, \"Great Stable\", [2]], [2833.3333333333335, \"Stable\", [11]], [2925.0, \"Smithy\", [5]], [2955.0, \"Trapper\", [4, 5, 6]], [3010.0, \"Palace\", [2]], [3022.5, \"Earth Wall\", [12]], [3022.5, \"Palisade\", [12]], [3022.5, \"Stone Wall\", [12]], [3025.0, \"City Wall\", [12]], [3067.5, \"Smithy\", [8]], [3152.5, \"Palace\", [5]], [3170.0, \"Makeshift Wall\", [15]], [3170.0, \"Stable\", [7]], [3175.0, \"Warehouse\", [12]], [3185.0, \"Granary\", [11]], [3215.0, \"Barracks\", [7]], [3245.0, \"Workshop\", [6]], [3250.0, \"Rally Point\", [12]], [3280.0, \"Earth Wall\", [4, 5, 6]], [3285.0, \"City Wall\", [4, 5, 6]], [3285.0, \"Stone Wall\", [4, 5, 6]], [3290.0, \"Palisade\", [4, 5, 6]], [3320.0, \"Stable\", [10]], [3320.0, \"Trapper\", [10]], [3342.5, \"Granary\", [14]], [3387.0, \"Palace\", [9]], [3403.0, \"Makeshift Wall\", [19]], [3446.6666666666665, \"Palace\", [7]], [3450.0, \"Warehouse\", [4, 5, 6]], [3460.0, \"Town Hall\", [3]], [3470.0, \"Granary\", [8, 9]], [3480.0, \"Trapper\", [13]], [3505.0, \"Granary\", [17]], [3535.0, \"Rally Point\", [4, 5, 6]], [3564.0, \"Stable\", [14]], [3588.0, \"Granary\", [18]], [3626.6666666666665, \"Stable\", [12]], [3627.5, \"Stonemason's Lodge\", [12]], [3629.1666666666665, \"Makeshift Wall\", [20]], [3650.0, \"Granary\", [16]], [3690.0, \"City Wall\", [10]], [3690.0, \"Earth Wall\", [10]], [3690.0, \"Palisade\", [10]], [3690.0, \"Stone Wall\", [10]], [3750.0, \"Smithy\", [6]], [3867.5, \"Earth Wall\", [13]], [3867.5, \"Palisade\", [13]], [3870.0, \"City Wall\", [13]], [3870.0, \"Stone Wall\", [13]], [3875.0, \"Warehouse\", [10]], [3945.0, \"Great Granary\", [2, 3]], [3945.0, \"Stonemason's Lodge\", [4, 5, 6]], [3965.0, \"Rally Point\", [10]], [3965.0, \"Workshop\", [4]], [4062.5, \"Warehouse\", [13]], [4065.0, \"Waterworks\", [2]], [4070.0, \"Smithy\", [3, 4]], [4125.0, \"Horse Drinking Trough\", [6]], [4157.5, \"Workshop\", [7]], [4160.0, \"Rally Point\", [13]], [4215.0, \"Residence\", [5]], [4250.0, \"Trapper\", [11]], [4280.0, \"Granary\", [15]], [4290.0, \"Smithy\", [11]], [4336.0, \"Palace\", [10]], [4358.75, \"Workshop\", [10]], [4408.333333333333, \"Palace\", [8]], [4420.0, \"Residence\", [8]], [4430.0, \"Stonemason's Lodge\", [10]], [4439.375, \"Palace\", [12]], [4457.5, \"Trapper\", [14]], [4563.0, \"Stable\", [15]], [4593.0, \"Granary\", [19]], [4620.0, \"Trapper\", [8, 9]], [4624.166666666667, \"Palace\", [11]], [4643.333333333333, \"Stable\", [13]], [4645.0, \"Stonemason's Lodge\", [13]], [4673.75, \"Trapper\", [17]], [4720.0, \"City Wall\", [11]], [4720.0, \"Earth Wall\", [11]], [4725.0, \"Palisade\", [11]], [4725.0, \"Stone Wall\", [11]], [4784.0, \"Trapper\", [18]], [4795.0, \"Smithy\", [7]], [4833.333333333333, \"Town Hall\", [6]], [4867.5, \"Stable\", [16]], [4868.333333333333, \"Trapper\", [16]], [4900.0, \"Granary\", [20]], [4935.0, \"Palace\", [4]], [4950.0, \"Earth Wall\", [14]], [4950.0, \"Palisade\", [14]], [4952.5, \"Stone Wall\", [14]], [4955.0, \"City Wall\", [14]], [4960.0, \"Warehouse\", [11]], [5000.0, \"Command Center\", [2]], [5025.0, \"Smithy\", [10]], [5030.0, \"Horse Drinking Trough\", [4]], [5075.0, \"Workshop\", [5]], [5080.0, \"Rally Point\", [11]], [5130.0, \"Earth Wall\", [8, 9]], [5135.0, \"City Wall\", [8, 9]], [5135.0, \"Palisade\", [8, 9]], [5140.0, \"Stone Wall\", [8, 9]], [5150.0, \"Bakery\", [1]], [5190.0, \"Stable\", [9]], [5192.5, \"City Wall\", [17]], [5192.5, \"Earth Wall\", [17]], [5192.5, \"Palisade\", [17]], [5192.5, \"Stone Wall\", [17]], [5200.0, \"Warehouse\", [14]], [5277.5, \"Horse Drinking Trough\", [7]], [5289.090909090909, \"Palace\", [14]], [5316.0, \"City Wall\", [18]], [5316.0, \"Earth Wall\", [18]], [5316.666666666667, \"Stable\", [18]], [5317.0, \"Palisade\", [18]], [5317.0, \"Stone Wall\", [18]], [5320.0, \"Workshop\", [8]], [5325.0, \"Rally Point\", [14]], [5340.714285714285, \"Stable\", [17]], [5390.0, \"Warehouse\", [8, 9]], [5397.0, \"Smithy\", [14]], [5400.0, \"Residence\", [6]], [5405.0, \"Town Hall\", [2]], [5408.333333333333, \"City Wall\", [16]], [5408.333333333333, \"Palisade\", [16]], [5408.333333333333, \"Stone Wall\", [16]], [5410.0, \"Earth Wall\", [16]], [5425.0, \"Clay Pit\", [7]], [5425.0, \"Cropland\", [7]], [5425.0, \"Woodcutter\", [7]], [5452.5, \"Warehouse\", [17]], [5491.666666666667, \"Smithy\", [12]], [5517.5, \"Barracks\", [12]], [5525.0, \"Rally Point\", [8, 9]], [5525.0, \"Workshop\", [2, 3]], [5533.75, \"Horse Drinking Trough\", [10]], [5568.181818181818, \"Stable\", [19]], [5582.5, \"Rally Point\", [17]], [5583.0, \"Warehouse\", [18]], [5662.5, \"Town Hall\", [5]], [5665.0, \"Stonemason's Lodge\", [11]], [5680.0, \"Warehouse\", [16]], [5681.875, \"Palace\", [13]], [5705.0, \"Trapper\", [15]], [5711.0, \"Workshop\", [12]], [5715.0, \"Rally Point\", [18]], [5729.2307692307695, \"Palace\", [15]], [5770.0, \"Tournament Square\", [1]], [5787.5, \"Treasury\", [2]], [5795.0, \"Great Stable\", [5]], [5813.333333333333, \"Rally Point\", [16]], [5855.0, \"Iron Mine\", [7]], [5865.0, \"Residence\", [3, 4]], [5940.0, \"Great Granary\", [7]], [5945.0, \"Stonemason's Lodge\", [14]], [5995.0, \"Barracks\", [4, 5, 6]], [6030.7692307692305, \"Stable\", [20]], [6080.0, \"Great Stable\", [8]], [6082.0, \"Town Hall\", [9]], [6125.0, \"Great Warehouse\", [2, 3]], [6125.0, \"Trapper\", [19]], [6160.0, \"Stonemason's Lodge\", [8, 9]], [6176.666666666667, \"Residence\", [11]], [6186.666666666667, \"Town Hall\", [7]], [6231.25, \"Stonemason's Lodge\", [17]], [6337.5, \"Palisade\", [15]], [6337.5, \"Stone Wall\", [15]], [6340.0, \"City Wall\", [15]], [6340.0, \"Earth Wall\", [15]], [6355.0, \"Palace\", [16]], [6360.0, \"Clay Pit\", [4, 5, 6]], [6360.0, \"Cropland\", [4, 5, 6]], [6360.0, \"Woodcutter\", [4, 5, 6]], [6380.0, \"Stonemason's Lodge\", [18]], [6395.0, \"Great Barracks\", [2, 3]], [6422.105263157895, \"Palace\", [17]], [6440.0, \"Horse Drinking Trough\", [5]], [6445.0, \"Sawmill\", [2, 3]], [6455.0, \"Iron Foundry\", [2, 3]], [6491.666666666667, \"Stonemason's Lodge\", [16]], [6495.0, \"Brickyard\", [2, 3]], [6532.5, \"Trapper\", [20]], [6655.0, \"Warehouse\", [15]], [6685.0, \"Workshop\", [14]], [6730.0, \"Barracks\", [10]], [6755.0, \"Horse Drinking Trough\", [8]], [6805.0, \"City Wall\", [19]], [6805.0, \"Palisade\", [19]], [6806.0, \"Earth Wall\", [19]], [6806.0, \"Stone Wall\", [19]], [6810.0, \"Workshop\", [9]], [6812.5, \"Rally Point\", [15]], [6870.0, \"Iron Mine\", [4, 5, 6]], [6905.0, \"Residence\", [7]], [6909.0, \"Smithy\", [15]], [7010.0, \"Horse Drinking Trough\", [2, 3]], [7026.666666666667, \"Smithy\", [13]], [7060.0, \"Barracks\", [13]], [7099.318181818182, \"Palace\", [18]], [7146.0, \"Warehouse\", [19]], [7160.0, \"Hero's Mansion\", [2, 3]], [7242.5, \"Residence\", [10]], [7253.0, \"Horse Drinking Trough\", [12]], [7258.333333333333, \"City Wall\", [20]], [7259.166666666667, \"Earth Wall\", [20]], [7259.166666666667, \"Palisade\", [20]], [7259.166666666667, \"Stone Wall\", [20]], [7312.0, \"Workshop\", [13]], [7316.0, \"Rally Point\", [19]], [7368.333333333333, \"Smithy\", [16]], [7404.444444444444, \"Palace\", [19]], [7425.0, \"Great Stable\", [6]], [7438.333333333333, \"Workshop\", [11]], [7440.0, \"Trade Office\", [6]], [7530.0, \"Brewery\", [2]], [7605.0, \"Stonemason's Lodge\", [15]], [7621.666666666667, \"Warehouse\", [20]], [7721.666666666667, \"Treasury\", [5]], [7774.0, \"Residence\", [14]], [7785.0, \"Town Hall\", [10]], [7803.333333333333, \"Rally Point\", [20]], [7855.0, \"Smithy\", [9]], [7908.333333333333, \"Residence\", [12]], [7920.0, \"Town Hall\", [8]], [7971.25, \"Town Hall\", [12]], [7996.71875, \"Palace\", [20]], [8049.444444444444, \"Smithy\", [18]], [8070.0, \"Great Stable\", [3, 4]], [8085.0, \"Smithy\", [17]], [8167.0, \"Stonemason's Lodge\", [19]], [8177.916666666667, \"Workshop\", [17]], [8247.5, \"Command Center\", [8]], [8303.333333333334, \"Town Hall\", [11]], [8430.0, \"Smithy\", [19]], [8488.57142857143, \"Horse Drinking Trough\", [14]], [8500.0, \"Great Stable\", [11]], [8518.888888888889, \"Workshop\", [16]], [8557.142857142857, \"Workshop\", [15]], [8620.0, \"Barracks\", [11]], [8645.0, \"Horse Drinking Trough\", [9]], [8710.833333333334, \"Stonemason's Lodge\", [20]], [8850.0, \"Town Hall\", [4]], [9035.0, \"Barracks\", [14]], [9080.0, \"Trade Office\", [4]], [9085.0, \"Command Center\", [5]], [9130.0, \"Smithy\", [20]], [9145.0, \"Waterworks\", [5]], [9190.0, \"Treasury\", [4]], [9240.0, \"Great Warehouse\", [7]], [9267.0, \"Treasury\", [8]], [9284.0, \"Horse Drinking Trough\", [13]], [9375.0, \"Barracks\", [8, 9]], [9445.0, \"Horse Drinking Trough\", [11]], [9476.25, \"Barracks\", [17]], [9498.181818181818, \"Town Hall\", [14]], [9500.0, \"Great Stable\", [7]], [9522.5, \"Trade Office\", [7]], [9630.0, \"Great Barracks\", [7]], [9662.307692307691, \"Workshop\", [18]], [9703.0, \"Barracks\", [18]], [9728.333333333334, \"Treasury\", [6]], [9871.666666666666, \"Barracks\", [16]], [9951.0, \"Residence\", [15]], [9960.0, \"Great Stable\", [10]], [9981.666666666666, \"Command Center\", [11]], [9985.0, \"Trade Office\", [10]], [10048.75, \"Workshop\", [19]], [10123.333333333334, \"Residence\", [13]], [10200.0, \"Great Granary\", [12]], [10203.125, \"Town Hall\", [13]], [10277.5, \"Waterworks\", [8]], [10287.307692307691, \"Town Hall\", [15]], [10335.0, \"Brewery\", [5]], [10385.0, \"Horse Drinking Trough\", [17]], [10545.0, \"Brewery\", [3]], [10615.0, \"Residence\", [16]], [10696.0, \"Great Stable\", [14]], [10817.222222222223, \"Horse Drinking Trough\", [16]], [10831.842105263158, \"Workshop\", [20]], [10865.714285714286, \"Horse Drinking Trough\", [15]], [10877.0, \"Command Center\", [14]], [10880.0, \"Great Stable\", [12]], [11085.0, \"Command Center\", [6]], [11105.0, \"Great Granary\", [4, 5, 6]], [11310.0, \"Residence\", [9]], [11412.0, \"Town Hall\", [16]], [11532.631578947368, \"Town Hall\", [17]], [11567.5, \"Barracks\", [15]], [11585.625, \"Treasury\", [11]], [11593.888888888889, \"Residence\", [18]], [11625.0, \"Trade Office\", [5]], [11645.714285714286, \"Residence\", [17]], [11676.0, \"Treasury\", [9]], [11975.0, \"Waterworks\", [6]], [12141.818181818182, \"Residence\", [19]], [12178.333333333334, \"Command Center\", [12]], [12185.0, \"Trade Office\", [8]], [12258.333333333334, \"Treasury\", [7]], [12260.0, \"Treasury\", [10]], [12270.0, \"Horse Drinking Trough\", [18]], [12272.5, \"Command Center\", [10]], [12305.0, \"Waterworks\", [3, 4]], [12421.0, \"Barracks\", [19]], [12450.0, \"Great Granary\", [10]], [12630.0, \"Trade Office\", [2, 3]], [12748.181818181818, \"Town Hall\", [18]], [12760.625, \"Horse Drinking Trough\", [19]], [12790.0, \"Hero's Mansion\", [7]], [12900.0, \"Grain Mill\", [2, 3]], [13055.0, \"Great Granary\", [13]], [13087.0, \"Trade Office\", [12]], [13150.384615384615, \"Residence\", [20]], [13247.5, \"Barracks\", [20]], [13269.0, \"Command Center\", [15]], [13296.296296296296, \"Town Hall\", [19]], [13361.818181818182, \"Command Center\", [19]], [13377.272727272728, \"Treasury\", [13]], [13386.111111111111, \"Command Center\", [18]], [13491.666666666666, \"Command Center\", [16]], [13515.0, \"Command Center\", [7]], [13550.0, \"Command Center\", [3, 4]], [13690.0, \"Great Stable\", [15]], [13754.736842105263, \"Horse Drinking Trough\", [20]], [13793.461538461539, \"Command Center\", [20]], [13926.666666666666, \"Great Stable\", [13]], [14106.42857142857, \"Command Center\", [17]], [14262.307692307691, \"Treasury\", [14]], [14360.0, \"Town Hall\", [20]], [14467.5, \"Brewery\", [6]], [14585.0, \"Treasury\", [3]], [14598.125, \"Treasury\", [12]], [14603.333333333334, \"Great Stable\", [16]], [14760.0, \"Brewery\", [4]], [14858.333333333334, \"Command Center\", [13]], [15315.0, \"Trade Office\", [14]], [15405.0, \"Waterworks\", [11]], [15492.368421052632, \"Treasury\", [16]], [15560.0, \"Great Stable\", [9]], [15574.333333333334, \"Treasury\", [15]], [15600.0, \"Trade Office\", [9]], [15695.0, \"Waterworks\", [7]], [15867.5, \"Great Warehouse\", [12]], [15935.0, \"Great Granary\", [11]], [15951.111111111111, \"Great Stable\", [18]], [16022.142857142857, \"Great Stable\", [17]], [16545.0, \"Great Barracks\", [12]], [16704.545454545456, \"Great Stable\", [19]], [16712.5, \"Great Granary\", [14]], [16750.0, \"Trade Office\", [13]], [16835.0, \"Tournament Square\", [2, 3]], [16858.636363636364, \"Treasury\", [17]], [17038.333333333332, \"Trade Office\", [11]], [17260.0, \"Great Warehouse\", [4, 5, 6]], [17307.962962962964, \"Treasury\", [18]], [17325.0, \"Great Granary\", [8, 9]], [17523.75, \"Great Granary\", [17]], [17640.0, \"Waterworks\", [10]], [17944.0, \"Great Granary\", [18]], [17990.0, \"Great Barracks\", [4, 5, 6]], [18092.69230769231, \"Great Stable\", [20]], [18253.333333333332, \"Great Granary\", [16]], [18400.78125, \"Treasury\", [19]], [18735.833333333332, \"Trade Office\", [17]], [18903.333333333332, \"Brewery\", [8]], [19370.0, \"Great Warehouse\", [10]], [19516.11111111111, \"Trade Office\", [16]], [19524.21052631579, \"Treasury\", [20]], [19603.571428571428, \"Trade Office\", [15]], [19848.75, \"Brewery\", [9]], [20120.0, \"Command Center\", [9]], [20181.666666666668, \"Waterworks\", [12]], [20200.0, \"Great Barracks\", [10]], [20252.5, \"Brewery\", [7]], [20312.5, \"Great Warehouse\", [13]], [20779.0, \"Waterworks\", [14]], [21180.0, \"Great Barracks\", [13]], [21390.0, \"Great Granary\", [15]], [22136.923076923078, \"Trade Office\", [18]], [22275.0, \"Hero's Mansion\", [4, 5, 6]], [22969.0, \"Great Granary\", [19]], [23022.5, \"Trade Office\", [19]], [24180.0, \"Cropland\", [8, 9]], [24185.0, \"Clay Pit\", [8, 9]], [24185.0, \"Woodcutter\", [8, 9]], [24500.0, \"Great Granary\", [20]], [24795.0, \"Great Warehouse\", [11]], [24815.526315789473, \"Trade Office\", [20]], [25250.0, \"Clay Pit\", [10]], [25255.0, \"Cropland\", [10]], [25255.0, \"Woodcutter\", [10]], [25375.0, \"Tournament Square\", [7]], [25860.0, \"Great Barracks\", [11]], [25960.0, \"Bakery\", [2, 3]], [25995.0, \"Great Warehouse\", [14]], [26120.0, \"Iron Mine\", [8, 9]], [26436.666666666668, \"Waterworks\", [13]], [26607.5, \"Hero's Mansion\", [12]], [26925.0, \"Waterworks\", [9]], [26960.0, \"Great Warehouse\", [8, 9]], [27112.5, \"Great Barracks\", [14]], [27221.0, \"Waterworks\", [15]], [27260.0, \"Great Warehouse\", [17]], [27275.0, \"Iron Mine\", [10]], [27788.75, \"Brewery\", [10]], [27914.0, \"Great Warehouse\", [18]], [28105.0, \"Great Barracks\", [8, 9]], [28395.0, \"Great Warehouse\", [16]], [28427.5, \"Great Barracks\", [17]], [29110.0, \"Great Barracks\", [18]], [29611.666666666668, \"Great Barracks\", [16]], [29716.666666666668, \"Waterworks\", [16]], [30080.0, \"Hero's Mansion\", [10]], [33277.5, \"Great Warehouse\", [15]], [33365.71428571428, \"Waterworks\", [17]], [33996.11111111111, \"Waterworks\", [18]], [34702.5, \"Great Barracks\", [15]], [35220.0, \"Clay Pit\", [12]], [35220.0, \"Woodcutter\", [12]], [35222.5, \"Cropland\", [12]], [35382.5, \"Hero's Mansion\", [13]], [35729.0, \"Great Warehouse\", [19]], [36437.72727272727, \"Waterworks\", [19]], [37261.0, \"Great Barracks\", [19]], [38037.5, \"Iron Mine\", [12]], [38111.666666666664, \"Great Warehouse\", [20]], [39625.0, \"Hero's Mansion\", [8, 9]], [39745.0, \"Great Barracks\", [20]], [40010.0, \"Hero's Mansion\", [11]], [40390.0, \"Waterworks\", [20]], [42180.0, \"Cropland\", [11]], [42180.0, \"Woodcutter\", [11]], [42185.0, \"Clay Pit\", [11]], [43595.0, \"Tournament Square\", [12]], [45555.0, \"Iron Mine\", [11]], [47060.0, \"Hero's Mansion\", [14]], [47420.0, \"Tournament Square\", [4, 5, 6]], [53220.0, \"Tournament Square\", [10]], [55357.5, \"Hero's Mansion\", [17]], [55496.666666666664, \"Hero's Mansion\", [16]], [55802.5, \"Tournament Square\", [13]], [58815.0, \"Woodcutter\", [13]], [58817.5, \"Clay Pit\", [13]], [58820.0, \"Cropland\", [13]], [58902.0, \"Hero's Mansion\", [18]], [62592.5, \"Hero's Mansion\", [15]], [63522.5, \"Iron Mine\", [13]], [68125.0, \"Tournament Square\", [11]], [71427.5, \"Tournament Square\", [14]], [74060.0, \"Tournament Square\", [8, 9]], [74897.5, \"Tournament Square\", [17]], [76696.0, \"Tournament Square\", [18]], [78020.0, \"Tournament Square\", [16]], [78338.0, \"Hero's Mansion\", [19]], [86825.0, \"Hero's Mansion\", [20]], [91430.0, \"Tournament Square\", [15]], [98172.0, \"Tournament Square\", [19]], [98222.5, \"Cropland\", [14]], [98225.0, \"Clay Pit\", [14]], [98225.0, \"Woodcutter\", [14]], [104716.66666666667, \"Tournament Square\", [20]], [106085.0, \"Iron Mine\", [14]], [164035.0, \"Cropland\", [15]], [164037.5, \"Clay Pit\", [15]], [164037.5, \"Woodcutter\", [15]], [177162.5, \"Iron Mine\", [15]], [182625.0, \"Clay Pit\", [16]], [182626.66666666666, \"Cropland\", [16]], [182626.66666666666, \"Woodcutter\", [16]], [197236.66666666666, \"Iron Mine\", [16]], [228740.0, \"Cropland\", [17]], [228741.25, \"Woodcutter\", [17]], [228742.5, \"Clay Pit\", [17]], [247040.0, \"Iron Mine\", [17]], [305597.0, \"Cropland\", [18]], [305598.0, \"Clay Pit\", [18]], [305598.0, \"Woodcutter\", [18]], [330045.0, \"Iron Mine\", [18]], [510347.0, \"Cropland\", [19]], [510348.0, \"Clay Pit\", [19]], [510349.0, \"Woodcutter\", [19]], [551176.0, \"Iron Mine\", [19]], [710234.1666666666, \"Clay Pit\", [20]], [710235.0, \"Cropland\", [20]], [710235.0, \"Woodcutter\", [20]], [767054.1666666666, \"Iron Mine\", [20]], [889568.75, \"Clay Pit\", [21]], [889569.375, \"Cropland\", [21]]]"

var buildReqs = {
	"Bakery": {
		"Cropland": 10,
		"Grain Mill": 5,
		"Main Building": 5
	},
	"Brickyard": {
		"Clay Pit": 10,
		"Main Building": 5
	},
	"Sawmill": {
		"Woodcutter": 10,
		"Main Building": 5
	},
	"Iron Foundry": {
		"Iron Mine": 10,
		"Main Building": 5
	},
	"Grain Mill": {
		"Cropland": 5,
		"Main Building": 5
	},
	"Granary": {
		"Main Building": 1
	},
	"Warehouse": {
		"Main Building": 1
	},
	"Great Granary": {
		"Main Building": 10
	},
	"Great Warehouse": {
		"Main Building": 10
	},
	"Waterworks": {
		"Hero's Mansion": 10
	},
	"Barracks": {
		"Rally Point": 1,
		"Main Building": 3
	},
	"Hero's Mansion": {
		"Rally Point": 1,
		"Main Building": 3
	},
	"Academy": {
		"Barracks": 3,
		"Main Building": 3
	},
	"Smithy": {
		"Academy": 1,
		"Main Building": 3
	},
	"Stable": {
		"Academy": 5,
		"Smithy": 3
	},
	"Workshop": {
		"Academy": 10,
		"Main Building": 5
	},
	"Tournament Square": {
		"Rally Point": 15
	},
	"Trapper": {
		"Rally Point": 1
	},
	"Stonemason's Lodge": {
		"Main Building": 5
	},
	"Great Stable": {
		"Stable": 20
	},
	"Great Barracks": {
		"Barracks": 20
	},
	"Brewery": {
		"Granary": 20,
		"Rally Point": 10
	},
	"Command Center": {
		"Main Building": 5
	},
	"Embassy": {
		"Main Building": 1
	},
	"Horse Drinking Trough": {
		"Rally Point": 10,
		"Stable": 20
	},
	"Marketplace": {
		"Main Building": 3,
		"Granary": 1,
		"Warehouse": 1
	},
	"Residence": {
		"Main Building": 5
	},
	"Palace": {
		"Main Building": 5,
		"Embassy": 1
	},
	"Town Hall": {
		"Main Building": 10,
		"Academy": 10
	},
	"Trade Office": {
		"Marketplace": 20,
		"Stable": 10
	},
	"Treasury": {
		"Main Building": 10
	},
}

var data = JSON.parse(data_str);
var structs = {};
var r_boxes = {};
var l_tiles = [];

window.onload = function() {
	document.getElementById("wrapper").style.height = window.innerHeight;
	for (var i = 0; i < data.length; i++) {
		var tile = eleFromHTML("<div class=\"tile\">" + "<div class=\"box\" bid=" + i + ">" + data[i][1] + " Lv. " + data[i][2] + "</div>" + Math.floor(data[i][0])+ "</div>");
		tile.firstChild.onclick = function(e){
			var bid = parseInt(this.getAttribute("bid"));
			buildStruct(bid);
			this.parentNode.classList.add("hidden");
		};
		document.getElementById("builds").appendChild(tile);
		if (buildReqs.hasOwnProperty(data[i][1]) || !data[i][2].includes(1)) {
			tile.classList.add("hidden");
		}
		l_tiles.push(tile);
	}
}

function buildStruct(bid) {
	var name = data[bid][1];
	var levels = data[bid][2];
	var lv = levels[levels.length-1];
	if (!(name in structs)) {
		var box = eleFromHTML("<div class=\"box\" name=\"" + name + "\"></div>");
		box.onclick = function(e){
			var n = this.getAttribute("name");
			delete structs[n];
			delete r_boxes[n];
			this.parentNode.removeChild(this);
			updateList();
		};
		document.getElementById("structs").appendChild(box);
		r_boxes[name] = box;
		structs[name] = [];
	}
	r_boxes[name].innerHTML = name + " Lv. " + lv;
	structs[name].push(bid);
	updateList();
}

function updateList() {
	for (var i = 0; i < l_tiles.length; i++) {
		var name = data[i][1];
		var lvs = data[i][2];
		var display = true;
		if (lvs[0] == 1) {
			if (name in structs) {
				display = false;
			}
			for (var req in buildReqs[name]) {
				if (req in structs) {
					var curr_lv = data[structs[req][structs[req].length-1]][2];
					if (buildReqs[name][req] > curr_lv[curr_lv.length-1]) {
						display = false;
					}
				}
				else {
					display = false;
				}
			}
		}
		else {
			if (!(name in structs) || lvs[0] != data[structs[name][structs[name].length - 1]][2][0]+1) {
				display = false;
			}
		}
		if (display) {
			l_tiles[i].classList.remove("hidden");
		}
		else {
			l_tiles[i].classList.add("hidden");
		}
	}
}

function eleFromHTML(htmlString) {
  var div = document.createElement('div');
  div.innerHTML = htmlString.trim();
  return div.firstChild; 
}